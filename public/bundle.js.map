{"version":3,"sources":["webpack:///webpack/bootstrap acc177b909d02618d784","webpack:///./public/javascripts/index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA;AACA,sDAAsD,OAAO,SAAS,SAAS;AAC/E,qDAAqD,OAAO;AAC5D;AACA;AACA;AACA,mCAAmC,wBAAwB,EAAE;AAC7D;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,mCAAmC,wBAAwB,EAAE;AAC7D;AACA;;AAEA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA,0DAA0D,OAAO;AACjE,yDAAyD,OAAO;AAChE;AACA;AACA,uCAAuC,wBAAwB,EAAE;AACjE;AACA;AACA;;AAEA;AACA,aAAa;;AAEb;AACA,uCAAuC,wBAAwB,EAAE;AACjE;AACA;;AAEA;AACA,aAAa;;;;AAIb;;;AAGA,CAAC;;AAED;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC,kB;AACA;AACA;AACA,SAAS,E;;AAET,K;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA,kBAAkB;AAClB,sD;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,QAAQ;;;AAGR,wBAAwB,oBAAoB;AAC5C,iDAAiD,gBAAgB,GAAG,wCAAwC,iBAAiB;;;AAG7H;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA,yBAAyB,oBAAoB;AAC7C,+CAA+C,gBAAgB,G;AAC/D,+CAA+C,iBAAiB;;AAEhE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap acc177b909d02618d784","let symbol = 'aapl';\nlet interval = '5d'\nlet chart = `https://cloud.iexapis.com/stable/stock/${symbol}/chart/${interval}?token=pk_dfb132b12db14003bfeb90dc058b276c&chartCloseOnly=true`;\nlet info = `https://cloud.iexapis.com/stable/stock/${symbol}/company?token=pk_dfb132b12db14003bfeb90dc058b276c&format=json`;\n// const api = 'https://api.coindesk.com/v1/bpi/historical/close.json?start=2017-12-31&end=2018-04-01';\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\n    fetch(chart)\n        .then(function (response) { return response.json(); })\n        .then(function (data) {\n                   //DO SOMETHING WITH DATA      \n            let parsedData = parseData(data);\n            drawChart(parsedData);\n        });\n\n    fetch(info)\n        .then(function (response) { return response.json(); })\n        .then(function (data) {\n            //DO SOMETHING WITH DATA      \n        \n            parseCompanyData(data);\n        });\n\n    let dropval = document.getElementById('dropval');\n\n    dropval.onchange = function () {\n        symbol = document.getElementById('dropval').value;\n        // console.log(symbol);\n        \n        chart = `https://cloud.iexapis.com/stable/stock/${symbol}/chart/5d?token=pk_dfb132b12db14003bfeb90dc058b276c&chartCloseOnly=true`;\n        info = `https://cloud.iexapis.com/stable/stock/${symbol}/company?token=pk_dfb132b12db14003bfeb90dc058b276c&format=json`;\n        // console.log(chart);\n        fetch(chart)\n            .then(function (response) { return response.json(); })\n            .then(function (data) {\n                //DO SOMETHING WITH DATA      \n                let parsedData = parseData(data);\n             \n                drawChart(parsedData);\n            });\n\n        fetch(info)\n            .then(function (response) { return response.json(); })\n            .then(function (data) {\n                //DO SOMETHING WITH DATA      \n\n                parseCompanyData(data);\n            });\n\n        \n\n    }\n\n    \n});\n\nfunction parseData(data) {\n    let arr = [];\n    // console.log(data);\n    for (let i = 0; i < data.length; i++) {\n        arr.push({ \n            date: new Date(data[i].date), //date            \n            close: data[i].close //convert string to number         \n        });   \n\n    }   \n\n    const closing = document.getElementById('closing');\n    const change = document.getElementById('change');\n    const percentage = document.getElementById('percentage');\n \n\n    let last = arr[arr.length - 1];\n    \n    let difference = Math.round((last.close - arr[arr.length - 2].close)* 100)/100;\n    let difpercent = Math.round(((last.close - arr[arr.length - 2].close) / arr[arr.length - 2].close) * 100) / 100;\n    // rounded = Math.round(difference * 100)/100;\n    // let difference = 5.60\n    // console.log(change);\n    closing.innerHTML = last.close;\n    if (difference < 0) {\n        change.style.color = \"Red\";\n        change.innerHTML = \"-\" + Math.abs(difference);\n    } else {\n        change.style.color = \"Lime\";\n        change.innerHTML = \"+\" + difference;\n    }\n\n    if (difpercent < 0) {\n        percentage.style.color = \"Red\";\n        percentage.innerHTML = \"(\" + \"-\" + Math.abs(difpercent) + \"%\" + \")\";\n    } else {\n        percentage.style.color = \"Lime\";\n        percentage.innerHTML = \"(\" + \"+\" + difpercent + \"%\" + \")\";\n    }\n    return arr;\n\n    \n}\n\nfunction drawChart(data) {\n    let svgWidth = 600, svgHeight = 330;\n    let margin = { top: 20, right: 20, bottom: 30, left: 50 };\n    let width = svgWidth - margin.left - margin.right; \n    let height = svgHeight - margin.top - margin.bottom;\n\n    // find data range\n    const xMin = d3.min(data, d => {\n        return d['date'];\n    });\n    const xMax = d3.max(data, d => {\n        return d['date'];\n    });\n    const yMin = d3.min(data, d => {\n        return d['close'];\n    });\n    const yMax = d3.max(data, d => {\n        return d['close'];\n    });\n    // scales for the charts\n    const xScale = d3\n        .scaleTime()\n        .domain([xMin, xMax])\n        .range([0, width]);\n    const yScale = d3\n        .scaleLinear()\n        .domain([yMin - 5, yMax])\n        .range([height, 0]);\n\n    d3.select('#svg').selectAll(\"*\").remove();\n    let svg = d3.select('#svg')\n        .attr(\"width\", svgWidth)\n        .attr(\"height\", svgHeight)\n\n    let g = svg.append('g')\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top +\")\");\n\n    let x = d3.scaleTime()\n        .rangeRound([0, width]);\n        \n    let y = d3.scaleLinear()\n        .rangeRound([height, 0]);\n\n    // let line = d3.line()\n    // .x(function (d) {\n    //     console.log(d);\n    //     return x(d.date) \n\n    // })\n\n    \n    // .y(function (d) { return y(d.value) })\n    //    x.domain(d3.extent(data, function (d) { return d.date })); y.domain(d3.extent(data, function (d) { return d.value }));\n\n\n    let line = d3\n        .line()\n        .x(function (d) {\n            // console.log(d);\n            { return x(d.date) }\n        }\n        \n        )\n        .y(function (d) { return y(d.close) })   \n        x.domain(d3.extent(data, function (d) { return d.date })); \n        y.domain(d3.extent(data, function (d) { return d.close }));\n    \n    g.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\n        .call(d3.axisBottom(x))\n        .select(\".domain\")\n        .remove();\n\n    g.append(\"g\")\n        .call(d3.axisLeft(y))\n        .append(\"text\")\n        .attr(\"fill\", \"#000\")\n        .attr(\"transform\", \"rotate(-90)\")\n        .attr(\"y\", 6)\n        .attr(\"dy\", \"0.71em\")\n        .attr(\"text-anchor\", \"end\")\n        .text(\"Close ($)\")\n        .style('fill', 'white');\n\n    g.append(\"path\")\n        .datum(data)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"lime\")\n        .attr(\"stroke-linejoin\", \"round\")\n        .attr(\"stroke-linecap\", \"round\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"d\", line);\n   \n}\n\nfunction parseCompanyData(data) {\n        const symbol = document.getElementById('symbol');\n        const exchange = document.getElementById('exchange');\n        const company = document.getElementById('company');\n        const site = document.getElementById('site');\n        const ceo = document.getElementById('ceo');\n        const sec = document.getElementById('sec');\n        const emp = document.getElementById('emp');\n        const st = document.getElementById('st');\n        const city = document.getElementById('city');\n    \n        symbol.innerHTML = \"(\" + data.symbol + \")\";\n        exchange.innerHTML = data.exchange;\n        company.innerHTML = data.companyName;\n        site.innerHTML = data.website;\n        ceo.innerHTML = data.CEO;\n        sec.innerHTML = data.sector;\n        emp.innerHTML = data.employees;\n        add.innerHTML = data.address;\n        st.innerHTML = data.state;\n        city.innerHTML = data.city;\n};\n\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/javascripts/index.js\n// module id = 8\n// module chunks = 0"],"sourceRoot":""}